<!DOCTYPE html>
<html>

<head>
    <title>Blockly for house</title>
</head>

<body>
    <script src="../../blockly/blockly_compressed.js"></script>
    <script src="../../blockly/blocks_compressed.js"></script>
    <script src="../../blockly/msg/js/en.js"></script>
    <script src="../../blockly/python_compressed.js"></script>
    <script src="blocks/myblocks.js"></script>
    <script src="generators/python/myblocks.js"></script>


    <xml id='startBlock' style = "display: none">
        <variables>
          <variable type="" id=")04lRX;z7?p`(tg|qj$b">door1</variable>
        </variables>
        <block type="variables_set" id="`/.eyp1pTEz3zt,)/v`#" x="41" y="63">
          <field name="VAR" id=")04lRX;z7?p`(tg|qj$b" variabletype="">door1</field>
          <value name="VALUE">
            <block type="door" id="/v_+;/Nn.(8X%CCb~))V">
              <value name="NAME">
                <block type="text" id="b|w^{Hmtj/]ts0ugM]SQ">
                  <field name="TEXT">123.123.123.213</field>
                </block>
              </value>
            </block>
          </value>
          <next>
            <block type="controls_if" id="FtRFkO!78O.:uma3i.5p">
              <mutation else="1"></mutation>
              <value name="IF0">
                <block type="logic_compare" id="v|#n9jcx7@(`qAnFqyl*">
                  <field name="OP">EQ</field>
                  <value name="A">
                    <block type="math_arithmetic" id="jj/}ou3Z}anHDYJXz?YM">
                      <field name="OP">ADD</field>
                      <value name="A">
                        <block type="math_number" id="f-~BB@Q)0,m]9kq8wrf]">
                          <field name="NUM">2</field>
                        </block>
                      </value>
                      <value name="B">
                        <block type="math_number" id="lefLKNei*EH86R/#{BST">
                          <field name="NUM">2</field>
                        </block>
                      </value>
                    </block>
                  </value>
                  <value name="B">
                    <block type="math_number" id="E](0c^h[/eHqApQ3X}GI">
                      <field name="NUM">4</field>
                    </block>
                  </value>
                </block>
              </value>
              <statement name="DO0">
                <block type="open_door" id="y7fl_^X+e~-/r=t|f:nF">
                  <value name="door">
                    <block type="variables_get" id=";DH((ptuk$aWtX~UEi1!">
                      <field name="VAR" id=")04lRX;z7?p`(tg|qj$b" variabletype="">door1</field>
                    </block>
                  </value>
                </block>
              </statement>
              <statement name="ELSE">
                <block type="close_door" id="}S(#-c`w!LuCND,%rZbr">
                  <value name="door">
                    <block type="variables_get" id="K)XPt2CB5h`Ac37aKMwN">
                      <field name="VAR" id=")04lRX;z7?p`(tg|qj$b" variabletype="">door1</field>
                    </block>
                  </value>
                </block>
              </statement>
            </block>
          </next>
        </block>
      </xml>

    <h1>Hi!</h1>
    <h3>In this version:</h3>
    <p>Получаю xml</p>
    <p><a href="../../index.html">Back</a></p>
    <table>
        <tr>
            <td>
                    <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
                    <xml id="toolbox" style="display: none">
                        <category name="Logic" colour="%{BKY_LOGIC_HUE}">
                            <category name="If">
                                <block type="controls_if"></block>
                                <block type="controls_if">
                                    <mutation else="1"></mutation>
                                </block>
                                <block type="controls_if">
                                    <mutation elseif="1" else="1"></mutation>
                                </block>
                            </category>
                            <category name="Boolean" colour="%{BKY_LOGIC_HUE}">
                                <block type="logic_compare"></block>
                                <block type="logic_operation"></block>
                                <block type="logic_negate"></block>
                                <block type="logic_boolean"></block>
                                <block type="logic_null"></block>
                                <block type="logic_ternary"></block>
                            </category>
                        </category>
                        <category name="Loops" colour="%{BKY_LOOPS_HUE}">
                            <block type="controls_repeat_ext">
                                <value name="TIMES">
                                    <block type="math_number">
                                        <field name="NUM">10</field>
                                    </block>
                                </value>
                            </block>
                            <block type="controls_whileUntil"></block>
                            <block type="controls_for">
                                <field name="VAR">i</field>
                                <value name="FROM">
                                    <block type="math_number">
                                        <field name="NUM">1</field>
                                    </block>
                                </value>
                                <value name="TO">
                                    <block type="math_number">
                                        <field name="NUM">10</field>
                                    </block>
                                </value>
                                <value name="BY">
                                    <block type="math_number">
                                        <field name="NUM">1</field>
                                    </block>
                                </value>
                            </block>
                            <block type="controls_forEach"></block>
                            <block type="controls_flow_statements"></block>
                        </category>
                        <category name="Math" colour="%{BKY_MATH_HUE}">
                            <block type="math_number">
                                <field name="NUM">123</field>
                            </block>
                            <block type="math_arithmetic"></block>
                            <block type="math_single"></block>
                            <block type="math_trig"></block>
                            <block type="math_constant"></block>
                            <block type="math_number_property"></block>
                            <block type="math_round"></block>
                            <block type="math_on_list"></block>
                            <block type="math_modulo"></block>
                            <block type="math_constrain">
                                <value name="LOW">
                                    <block type="math_number">
                                        <field name="NUM">1</field>
                                    </block>
                                </value>
                                <value name="HIGH">
                                    <block type="math_number">
                                        <field name="NUM">100</field>
                                    </block>
                                </value>
                            </block>
                            <block type="math_random_int">
                                <value name="FROM">
                                    <block type="math_number">
                                        <field name="NUM">1</field>
                                    </block>
                                </value>
                                <value name="TO">
                                    <block type="math_number">
                                        <field name="NUM">100</field>
                                    </block>
                                </value>
                            </block>
                            <block type="math_random_float"></block>
                            <block type="math_atan2"></block>
                        </category>
                        <category name="Lists" colour="%{BKY_LISTS_HUE}">
                            <block type="lists_create_empty"></block>
                            <block type="lists_create_with"></block>
                            <block type="lists_repeat">
                                <value name="NUM">
                                    <block type="math_number">
                                        <field name="NUM">5</field>
                                    </block>
                                </value>
                            </block>
                            <block type="lists_length"></block>
                            <block type="lists_isEmpty"></block>
                            <block type="lists_indexOf"></block>
                            <block type="lists_getIndex"></block>
                            <block type="lists_setIndex"></block>
                        </category>
                        <sep></sep>
                        <category name="Text" colour="%{BKY_TEXTS_HUE}">
                            <block type="text"></block>
                            <block type="text_length"></block>
                            <block type="text_print"></block>
                        </category>
                        <sep></sep>
                        <category name="My blocks" colour=110>
                            <block type="door"></block>
                            <block type="open_door"></block>
                            <block type="close_door"></block>
                        </category>
                        <sep></sep>
                        <category name="Variables" colour="%{BKY_VARIABLES_HUE}" custom="VARIABLE"></category>
                    </xml>
                    <script>
                        var workspace = Blockly.inject('blocklyDiv',
                            { toolbox: document.getElementById('toolbox') });
                            var xml = Blockly.Xml.textToDom(document.getElementById('startBlock'));
                            Blockly.Xml.domToWorkspace(xml,workspace);

                    </script>
            </td>
            <td>
                    <h5>Code output</h5>
                    <textarea id='code_output' readonly style="height: 480px; width: 600px;">#here will be code!</textarea>
                
                
                    <script>
                     function generate(event) {
                            var code = Blockly.Python.workspaceToCode(workspace);
                            document.getElementById('code_output').value = code;
                        }
                        workspace.addChangeListener(generate);
                    </script>
            </td>
        </tr>
    </table>
   
    
</body>

</html>